# ç»ä½³çš„ Swift API é£æ ¼è½¬å˜å³å°†åˆ°æ¥

[é˜…è¯»åŸæ–‡>>][original-article]

2016 å¹´ 1 æœˆ 29 æ—¥    [Dave Abrahams][dave-abrahams]

Cocoaã€Swift æ ‡å‡†åº“å’Œå¯èƒ½ç”šè‡³æ˜¯ä½ è‡ªå·±çš„ç±»å‹å’Œæ–¹æ³•ï¼Œéƒ½å°†ä½œå‡ºæ”¹å˜ï¼Œè€Œä¸”ä½ å¯ä»¥å¸®åŠ©å†³å®šå¦‚ä½•æ”¹å˜ã€‚

è‡ªä» Swift å‘å¸ƒä»¥æ¥ï¼ŒSwift æ ‡å‡†åº“ä¸­çš„ Cocoa æ¥å£å’Œ API ä¹‹é—´çš„æ ·å¼ä¸Šçš„é¸¿æ²Ÿå°±ä¸€ç›´å­˜åœ¨ï¼Œå…¶ä¸­å¾ˆå¤šä¸œè¥¿ç»å¸¸ååˆ†ä¸å¿…è¦åœ°çœ‹èµ·æ¥_å·®å¼‚æ˜æ˜¾_ã€‚è¿™å¹¶ä¸ä»…ä»…æ¬ ç¼ºç¾å­¦ä¸Šçš„è€ƒè™‘ï¼Œä¸ä¸€è‡´æ€§å’Œç¼ºå°‘å¯é¢„çŸ¥æ€§ä½¿å¾—ä¸‡äº‹æ›´éš¾ï¼Œä¸è®ºæ˜¯ç¼–ç¨‹ã€é™¤é”™æˆ–æ˜¯ç»´æŠ¤ã€‚ä»¤äººåº†å¹¸çš„æ˜¯ï¼Œå°½ç®¡è¿™äº›é¸¿æ²Ÿå­˜åœ¨ï¼Œä½† Swift å¼€å‘è€…ä»ç„¶ç¼–å†™å‡ºäº†å¤§é‡çš„ä¼˜ç§€çš„ä»£ç ï¼Œéšä¹‹ä¹Ÿé€æ­¥å‘å±•å‡ºäº†ä¸€ç§â€œSwiftyâ€çš„ä»£ç åº”è¯¥çœ‹èµ·æ¥å’Œä½“éªŒèµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„æ„Ÿè§‰ã€‚

å¼€å‘è€…çš„ç»å†å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨å®¡è§† API çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½çœ‹å‡ºå…¶ä¸­æœ‰æå‡çš„ç©ºé—´ã€‚è¿™äº›æå‡çš„ç©ºé—´ä¸ä»…åœ¨äºç¼–è¯‘å™¨å¼•å…¥ Objective-C API çš„æ–¹å¼â€”â€”å¯¼è‡´äº†ä¸€äº›åœ¨ Swift ä¸­çœ‹èµ·æ¥ä¸æ˜¯å¾ˆèˆ’æœçš„ç»“æœï¼Œè€Œä¸”åœ¨äº Swift æ ‡å‡†åº“ä¸­ç¼ºå¤±ä¸€å®šç¨‹åº¦çš„ï¼Œä¹Ÿæ˜¯ Cocoa ç”¨æˆ·ä½¿ç”¨çš„æ—¶å€™æ‰€é¢„æœŸçš„è§„å¾‹æ€§å’Œè¿è´¯æ€§ã€‚å¯¹æ­¤èº«åœ¨ Apple çš„æˆ‘ä»¬å†³å®šåšç‚¹ä»€ä¹ˆã€‚

ä¸ºäº†ä¿æŒ Cocoa å’Œ Swift æ ¸å¿ƒåº“çš„ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬éœ€è¦å®šç‚¹æ‰“å‡»ï¼šå®ç°ä¸€ç§ API ä¸­å¤§å®¶éƒ½å¯ä»¥éµå¾ªçš„ï¼Œç»Ÿä¸€çš„ã€ä¹¦å†™ä¸Šçš„æ–¹æ³•ã€‚å¯¹æ­¤ï¼Œæˆ‘ä»¬ä»¥å›æº¯å¹¶è´¨ç–‘æˆ‘ä»¬æœ€åˆçš„å‡è®¾å¼€å§‹ã€‚ç°å­˜çš„æŒ‡å¯¼æ–¹é’ˆå¿…å®šæ˜¯æå¥½çš„ï¼Œä½†æ˜¯å…¶ä¸­å¾ˆå¤šå†…å®¹å´æ˜¯ä¸º Objective-C è€Œè®¾å®šçš„ï¼Œå®ƒä»¬å¹¶æ²¡æœ‰è¦†ç›–å…·ä½“çš„ Swift åŠŸèƒ½ï¼Œä¾‹å¦‚ç¼ºçœå‚æ•°ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä»¬åˆ¶å®šçš„æ—¶å€™å¹¶æ²¡æœ‰å—åˆ°æ–°å…´çš„â€œSwift ä¹‹æ„Ÿâ€çš„å½±å“ï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬è§‰å¾—åº”è¯¥è¾¾åˆ°çš„æœ€é‡è¦çš„ä¸€ç‚¹ã€‚

æˆ‘ä»¬åœ¨å¼€å‘è¿™äº›æŒ‡å¯¼æ–¹é’ˆçš„åŒæ—¶ä¾¿æŠŠå®ƒä»¬è¿ç”¨åˆ°äº†æ ‡å‡†åº“ã€æ•´ä¸ª Cocoa å’Œå‡ ä¸ªå®ä¾‹é¡¹ç›®ä¹‹ä¸­ã€‚åœ¨æ­¤æœŸé—´æˆ‘ä»¬é‡å¤äº†è¯„ä¼°ç»“æœå¹¶ä¸æ–­æ”¹è¿›çš„è¿‡ç¨‹ã€‚åœ¨ Swift å¼€æºä¹‹å‰ï¼Œæˆ‘ä»¬ä¾¿å·²ç»éå…¬å¼€åœ°å®Œæˆäº†è¿™äº›æ”¹è¿›ï¼Œå¹¶å³å°†åœ¨ä¸‹ä¸ªå‘è¡Œç‰ˆæœ¬ä¸­å¸¦ä¸ºå¤§å®¶å¸¦æ¥æˆ‘ä»¬æ”¹è¿›çš„ç»“æœã€‚ä½†æ˜¯æˆ‘ä»¬è§‰å¾—ä¸€ä¸ª Swift çš„æ–°çš„æ—¶ä»£å·²ç»æ¥ä¸´ï¼šæ˜¯æ—¶å€™å‘å…¨ä¸–ç•Œå±•ç¤ºä¸€ä¸‹æˆ‘ä»¬æœ€è¿‘åšäº†äº›ä»€ä¹ˆäº†ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä»£ç å¼æ ·çš„ä¾‹å­ï¼Œåœ¨ä½œå‡ºæ”¹å˜ä¹‹å‰è¿™æ®µä»£ç æ˜¯è¿™æ ·çš„ï¼š

```swift
class UIBezierPath : NSObject, NSCopying, NSCoding { ... }
...
path.addLineToPoint(CGPoint(x: 100, y: 0))
path.fillWithBlendMode(kCGBlendModeMultiply, alpha: 0.7)
```

å’Œæ”¹å˜ä¹‹åï¼š

```swift
class UIBezierPath : Object, Copying, Coding { ... }
...
path.addLineTo(CGPoint(x: 100, y: 0))
path.fillWith(kCGBlendModeMultiply, alpha: 0.7)
```

æˆ‘ä»¬å·²ç»æŠŠæè®®çš„é£æ ¼è½¬å˜çš„ä¸‰ä¸ªéƒ¨åˆ†å‘å¸ƒåœ¨ [Swift è¯„å®¡ç»„][swiftâ€™s-evolution-group]ä¸Šä»¥ä¾›å…¬å…±å®¡æ ¸ï¼š[Cocoa å¼•å…¥æ–¹å¼çš„æ”¹å˜][swiftâ€™s-evolution=group:-changes-to-how-cocoa-is-imported]ã€[æ ¸å¿ƒåº“å¤–è¡¨ä¸Šçš„æ”¹å˜][changes-to-the-surface-of-the-standard-library]ä»¥åŠæŠŠæ‰€æœ‰ç´§å¯†è”ç³»åœ¨ä¸€èµ·çš„ [API æŒ‡å¯¼æ–¹é’ˆ][api-guidelines]ã€‚å‚ä¸è€…ä»¬ä¹Ÿå·²ç»å¼€å§‹å‘æˆ‘ä»¬æä¾›æ”¹è¿›çš„å»ºè®®ï¼Œç”±æ­¤æˆ‘ä»¬èƒ½å¤Ÿä»ä¸­çœ‹å‡ºå®ƒä»¬æ˜¯[å¦‚ä½•å½±å“ API][affectï¼apis] çš„ã€‚

ä¸¾ä¸ª~~ğŸŒ°~~ä¾‹å­ï¼Œæˆ‘ä»¬[å‘ç°][explored]çš„[æœ‰ä¸€ä¸ªå»ºè®®][one-suggestion]æ˜¯æŠŠè¿™ä¸ªè°ƒç”¨ï¼š

```swift
path.addArcWithCenter(
  origin, radius: 20.0, 
  startAngle: 0.0, endAngle: CGFloat(M_PI) * 2.0, clockwise: true)
```

æ”¹å˜æˆè¿™æ ·ï¼š

```swift
path.addArc(
  center: origin, radius: 20.0, 
  startAngle: 0.0, endAngle: CGFloat(M_PI) * 2.0, clockwise: true)
```

æˆ‘ä»¬æ˜¯å¦ä¼šå¯¹æ­¤ä½œå‡ºæ”¹å˜ï¼Ÿè™½ç„¶è¯„å®¡å›¢å·²ç»ç¡®å®šäº†ï¼Œä½†ä¹Ÿæ˜¯æ—¶å€™è®©å¤§å®¶å¬åˆ°ä½ å‘¼å£°äº†ã€‚å®¡æ ¸å‘¨æœŸå·²ç»å»¶é•¿è‡³ __2 æœˆ 5 æ—¥ æ˜ŸæœŸäº”__ã€‚å¦‚æœä½ æœ‰å…´è¶£å¸®åŠ©å¡‘é€ ä½ çš„è¯­è¨€å’Œæ¡†æ¶çš„æœªæ¥ï¼Œè¯·[åŠ å…¥æˆ‘ä»¬çš„è®¨è®º][join-the-discussion]ã€‚æè®®å’Œç›¸å…³çš„å®¡æ ¸å¸–å­åœ¨è¿™é‡Œï¼š

* [API è®¾è®¡æŒ‡å¯¼æ–¹é’ˆ][api-designï¼guidelines]â€”â€”[è®¨è®º][discussion-0]
* [æ›´å¥½çš„å°† Objective-C API ç¿»è¯‘è¿›å…¥ Swift][better-translation-of-objective-c-apis-into-swift]â€”â€”[è®¨è®º][discussion-1]
* [åº”ç”¨ API æŒ‡å¯¼æ–¹é’ˆåˆ°æ ‡å‡†åº“][apply-api-Guidelines-to-the-standard-library]â€”â€”[è®¨è®º][discussion-2]

<br />
<sub>Original article: [https://swift.org/blog/swift-api-transformation/][original-article]</sub>

<sup>Original article copyright Â© 2016 Apple Inc. All rights reserved. Swift and the Swift logo are trademarks of Apple Inc.</sup>

[original-article]: https://swift.org/blog/swift-api-transformation/
[dave-abrahams]: https://github.com/dabrahams/
[swiftâ€™s-evolution-group]: https://swift.org/community/#mailing-lists
[swiftâ€™s-evolution=group:-changes-to-how-cocoa-is-imported]: https://swift.org/community/#mailing-lists
[changes-to-the-surface-of-the-standard-library]: https://github.com/apple/swift-evolution/blob/master/proposals/0006-apply-api-guidelines-to-the-standard-library.md
[api-guidelines]: https://github.com/apple/swift-evolution/blob/master/proposals/0023-api-guidelines.md
[affectï¼apis]: https://github.com/apple/swift-3-api-guidelines-review/pull/5/files
[explored]: http://news.gmane.org/find-root.php?message_id=18A8335F%2d65F3%2d46A1%2dA494%2dAA89AC10836B%40apple.com
[one-suggestion]: http://news.gmane.org/find-root.php?message_id=3C5040B3%2dA205%2d46FA%2d98D3%2d5696D678EB39%40gmail.com
[join-the-discussion]: https://swift.org/contributing/#participating-in-the-swift-evolution-process
[api-designï¼guidelines]: https://github.com/apple/swift-evolution/blob/master/proposals/0023-api-guidelines.md
[discussion-0]: http://news.gmane.org/find-root.php?message_id=ABB71FFD%2d1AE8%2d43D3%2dB3F5%2d58225A2BAD66%40apple.com
[better-translation-of-objective-c-apis-into-swift]: https://github.com/apple/swift-evolution/blob/master/proposals/0005-objective-c-name-translation.md
[discussion-1]: http://news.gmane.org/find-root.php?message_id=CC036592%2d085D%2d4095%2d8D73%2d1DA9FC90A07B%40apple.com
[apply-api-Guidelines-to-the-standard-library]: https://github.com/apple/swift-evolution/blob/master/proposals/0006-apply-api-guidelines-to-the-standard-library.md
[discussion-2]: http://news.gmane.org/find-root.php?message_id=73E699B0%2dFAD2%2d46DA%2dB74E%2d849445A2F38A%40apple.com
